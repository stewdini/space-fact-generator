<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Random Space Fact Generator</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #000010;
      color: #e0e0e0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      padding: 1rem;
    }

    #spaceObjectsContainer {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .space-object {
      position: absolute;
      will-change: transform;
    }

    .planet {
      border-radius: 50%;
    }

    .planet.red    { background: #b22222; box-shadow: 0 0 8px #ff5c5c; }
    .planet.blue   { background: #4682b4; box-shadow: 0 0 8px #5ca0ff; }
    .planet.green  { background: #2e8b57; box-shadow: 0 0 8px #5cff8a; }
    .planet.orange { background: #ff8c00; box-shadow: 0 0 8px #ffa75c; }
    .planet.purple { background: #9370db; box-shadow: 0 0 8px #b55cff; }

    .comet {
      background: linear-gradient(90deg, #fff, #66fcf1);
      border-radius: 50%;
      box-shadow: 0 0 6px #66fcf1;
    }

    .asteroid {
      background: radial-gradient(circle, #a48a5c, #3f341c);
      border-radius: 50%;
      box-shadow: 0 0 4px #6b5432;
    }

    .rocket {
      width: 30px;
      height: 40px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      filter: drop-shadow(0 0 4px #fff);
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
      z-index: 1;
    }

    #factDisplay {
      font-size: 1.2rem;
      max-width: 600px;
      margin-bottom: 1rem;
      z-index: 1;
    }

    .sparkle {
      display: inline-block;
      animation: sparkleAnim 1.5s ease forwards;
      color: #66fcf1;
      font-size: 1.2rem;
      margin-left: 4px;
    }

    @keyframes sparkleAnim {
      0% { opacity: 0; transform: scale(0.5); }
      50% { opacity: 1; transform: scale(1.5); }
      100% { opacity: 0; transform: scale(1); }
    }

    #buttonsContainer {
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 1;
    }

    #factButton {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      background: #1f2833;
      color: #66fcf1;
      cursor: pointer;
      box-shadow: 0 0 10px #45a29e;
    }

    #factButton:hover {
      background: #45a29e;
    }

    #muteToggle {
      cursor: pointer;
      font-size: 1.4rem;
      color: #66fcf1;
    }

    #copyButton {
      font-size: 1.2rem;
      background: none;
      border: none;
      cursor: pointer;
      color: #ccc;
    }

    #copyFeedback {
      color: #66fcf1;
      display: none;
    }
  </style>
</head>
<body>
  <div id="spaceObjectsContainer"></div>
  <h1>ðŸ”­ Random Space Fact Generator<span class="sparkle">âœ¨</span></h1>
  <div id="factDisplay">Click the button below to learn a cool space fact!</div>
  <div id="buttonsContainer">
    <button id="factButton">Show Me a Random Fact</button>
    <span id="muteToggle" title="Toggle sound">ðŸ”Š</span>
    <button id="copyButton" title="Copy to clipboard">ðŸ“‹</button>
    <span id="copyFeedback">âœ… Copied!</span>
  </div>
<script>
  const rocketImages = [
    'https://i.imgur.com/6p5lqjc.png',
    'https://i.imgur.com/UH6M4Qz.png',
    'https://i.imgur.com/GdMJuEE.png'
  ];

  const container = document.getElementById('spaceObjectsContainer');

  class SpaceObject {
    constructor(type) {
      this.type = type;
      this.el = document.createElement('div');
      this.el.classList.add('space-object', type);

      if (type === 'planet') {
        const colors = ['red', 'blue', 'green', 'orange', 'purple'];
        this.el.classList.add(colors[Math.floor(Math.random() * colors.length)]);
        this.size = 20 + Math.random() * 30;
      } else if (type === 'comet') {
        this.size = 20 + Math.random() * 15;
      } else if (type === 'asteroid') {
        this.size = 15 + Math.random() * 20;
      } else if (type === 'rocket') {
        this.size = 30;
        const img = rocketImages[Math.floor(Math.random() * rocketImages.length)];
        this.el.style.backgroundImage = `url(${img})`;
      }

      this.el.style.width = this.size + 'px';
      this.el.style.height = this.size + 'px';

      // Start from edge
      const side = Math.floor(Math.random() * 4);
      switch (side) {
        case 0:
          this.x = Math.random() * window.innerWidth;
          this.y = -this.size;
          this.vx = (Math.random() - 0.5) * 0.2;
          this.vy = Math.random() * 0.4 + 0.1;
          break;
        case 1:
          this.x = window.innerWidth + this.size;
          this.y = Math.random() * window.innerHeight;
          this.vx = -(Math.random() * 0.4 + 0.1);
          this.vy = (Math.random() - 0.5) * 0.2;
          break;
        case 2:
          this.x = Math.random() * window.innerWidth;
          this.y = window.innerHeight + this.size;
          this.vx = (Math.random() - 0.5) * 0.2;
          this.vy = -(Math.random() * 0.4 + 0.1);
          break;
        case 3:
          this.x = -this.size;
          this.y = Math.random() * window.innerHeight;
          this.vx = Math.random() * 0.4 + 0.1;
          this.vy = (Math.random() - 0.5) * 0.2;
          break;
      }

      container.appendChild(this.el);
    }

    update() {
      this.x += this.vx;
      this.y += this.vy;
      this.el.style.transform = `translate(${this.x}px, ${this.y}px)`;
    }
  }

  const objects = [];
  const count = 25;

  for (let i = 0; i < count; i++) {
    const rand = Math.random();
    let type = 'planet';
    if (rand < 0.05) type = 'rocket';
    else if (rand < 0.3) type = 'comet';
    else if (rand < 0.6) type = 'asteroid';
    objects.push(new SpaceObject(type));
  }

  function animate() {
    objects.forEach(obj => obj.update());
    requestAnimationFrame(animate);
  }
  animate();

  // Fact logic
  const factDisplay = document.getElementById('factDisplay');
  const factButton = document.getElementById('factButton');
  const copyButton = document.getElementById('copyButton');
  const copyFeedback = document.getElementById('copyFeedback');
  const muteToggle = document.getElementById('muteToggle');

  let isMuted = false;
  const popSound = new Audio('https://cdn.pixabay.com/download/audio/2022/03/26/audio_ebaf1f29de.mp3?filename=pop-6167.mp3');
  popSound.volume = 0.3;

  muteToggle.addEventListener('click', () => {
    isMuted = !isMuted;
    muteToggle.textContent = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';
  });

  const factsURL = 'https://raw.githubusercontent.com/stewdini/space-fact-generator/main/facts.json';
  let facts = [];
  let previousIndex = -1;

  fetch(factsURL)
    .then(res => res.json())
    .then(data => { facts = data; })
    .catch(() => {
      factDisplay.textContent = 'Failed to load space facts.';
    });

  function getRandomFact() {
    if (!facts.length) return 'No facts available.';
    let index;
    do {
      index = Math.floor(Math.random() * facts.length);
    } while (index === previousIndex && facts.length > 1);
    previousIndex = index;
    return facts[index];
  }

  factButton.addEventListener('click', () => {
    const fact = getRandomFact();
    factDisplay.innerHTML = fact + '<span class="sparkle">âœ¨</span>';
    if (!isMuted) popSound.play().catch(() => {});
    copyButton.style.display = 'inline-block';
    copyFeedback.style.display = 'none';
  });

  copyButton.addEventListener('click', () => {
    const text = factDisplay.textContent.replace('âœ¨', '').trim();
    navigator.clipboard.writeText(text);
    copyFeedback.style.display = 'inline';
    setTimeout(() => {
      copyFeedback.style.display = 'none';
    }, 1500);
  });

  copyButton.style.display = 'none';
</script>
</body>
</html>
