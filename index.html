<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Random Space Fact Generator | Space Simplified</title>

<!-- Favicon -->
<link rel="icon" href="favicon.ico" />

<style>
  body {
    margin: 0;
    height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #e0e0e0;
    background: #000010;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 1rem;
    position: relative;
  }

  canvas#starfield {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
  }

  /* Background containers behind UI */
  #spaceObjectsContainer, #smokeTrailContainer {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0; /* Behind UI */
  }

  /* UI elements (header, fact, buttons) on top */
  h1, #factDisplay, #factButton, #muteToggle {
    position: relative;
    z-index: 10; /* In front */
  }

  /* Space object styles as before */
  .space-object {
    position: fixed;
    pointer-events: none;
    will-change: transform;
  }

  .planet {
    border-radius: 50%;
    box-shadow: 0 0 8px 1px rgba(100,150,255,0.3);
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
  }
  .planet.red {
    background-color: #b0413e;
    background-image:
      radial-gradient(circle at 30% 30%, #a03736 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #a83a3a 15%, transparent 18%),
      radial-gradient(circle at 55% 75%, #80312f 8%, transparent 10%);
    box-shadow: 0 0 6px 1px rgba(180, 65, 62, 0.35);
  }
  .planet.blue {
    background-color: #4b7dad;
    background-image:
      radial-gradient(circle at 25% 25%, #3d6890 8%, transparent 10%),
      radial-gradient(circle at 65% 60%, #366384 14%, transparent 17%),
      radial-gradient(circle at 50% 80%, #2b516f 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(75, 125, 173, 0.35);
  }
  .planet.green {
    background-color: #4ca36c;
    background-image:
      radial-gradient(circle at 30% 30%, #418b5a 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #3e7e52 14%, transparent 17%),
      radial-gradient(circle at 55% 75%, #2e5c3d 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(76, 163, 108, 0.35);
  }
  .planet.orange {
    background-color: #d17f3c;
    background-image:
      radial-gradient(circle at 30% 30%, #ab6831 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #9c5f2b 14%, transparent 17%),
      radial-gradient(circle at 55% 75%, #6d411d 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(209, 127, 60, 0.35);
  }
  .planet.purple {
    background-color: #7855b8;
    background-image:
      radial-gradient(circle at 30% 30%, #6646a1 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #5a3d8a 14%, transparent 17%),
      radial-gradient(circle at 55% 75%, #3d2b5f 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(120, 85, 184, 0.35);
  }

  .comet {
    border-radius: 50% / 60%;
    background: linear-gradient(90deg, #a0f0ff 0%, #66fcf1 30%, #b3ffff 60%, #66fcf1 80%, #a0f0ff 100%);
    box-shadow: 0 0 8px 3px #66fcf1aa;
  }

  .asteroid {
    background: radial-gradient(circle at 40% 40%, #997a55 40%, #6b5432 70%);
    clip-path: polygon(
      30% 0%, 70% 10%, 100% 40%, 85% 70%, 55% 100%, 20% 90%, 5% 50%, 10% 20%
    );
    box-shadow: 0 0 5px 1px #6b543266;
  }

  .space-object.rocket {
    width: 30px !important;
    height: 40px !important;
    filter: drop-shadow(0 0 1.5px #fff9);
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
  }

  .rocket-flame {
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 14px;
    height: 20px;
    pointer-events: none;
    filter: drop-shadow(0 0 2px #f90);
    animation: flameFlicker 0.15s infinite alternate;
    z-index: -1;
  }
  @keyframes flameFlicker {
    0% { transform: translateX(-50%) scaleY(1) scaleX(1); opacity: 1; }
    100% { transform: translateX(-50%) scaleY(1.15) scaleX(0.85); opacity: 0.85; }
  }

  /* Smoke puff style */
  .smoke-puff {
    position: fixed;
    background: radial-gradient(circle, rgba(180,180,180,0.7) 0%, rgba(180,180,180,0) 80%);
    border-radius: 50%;
    opacity: 0.6;
    pointer-events: none;
    will-change: transform, opacity;
  }

  /* UI styles */
  h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    text-shadow: 0 0 8px #66fcf1;
  }

  .sparkle {
    display: inline-block;
    animation: sparkleAnim 2s linear infinite;
    font-size: 2.2rem;
    color: #66fcf1;
    margin-left: 0.3em;
    position: relative;
    top: 5px;
  }
  @keyframes sparkleAnim {
    0%, 100% { opacity: 1; transform: rotate(0deg) scale(1); }
    50% { opacity: 0.5; transform: rotate(20deg) scale(1.3); }
  }

  #factDisplay {
    font-size: 1.4rem;
    margin: 2rem 0;
    line-height: 1.6;
    max-width: 600px;
  }

  #factButton {
    padding: 14px 35px;
    font-size: 1.3rem;
    border: none;
    border-radius: 10px;
    background-color: #1f2833;
    color: #66fcf1;
    cursor: pointer;
    box-shadow: 0 0 12px #45a29e99;
  }

  #factButton:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  #muteToggle {
    background: none;
    border: none;
    font-size: 1.4rem;
    cursor: pointer;
    color: #66fcf1;
    margin-left: 12px;
  }
</style>
</head>
<body>

<canvas id="starfield"></canvas>

<!-- Background objects container -->
<div id="spaceObjectsContainer"></div>
<!-- Smoke trail container -->
<div id="smokeTrailContainer"></div>

<!-- UI -->
<h1>ðŸ”­ Random Space Fact Generator<span class="sparkle">âœ¨</span></h1>
<p id="factDisplay">Click the button below to learn a cool space fact!</p>
<div>
  <button id="factButton">Show Me a Random Fact</button>
  <button id="muteToggle" title="Toggle sound">ðŸ”Š</button>
</div>

<script>
  // Starfield setup (same as before)
  const canvas = document.getElementById('starfield');
  const ctx = canvas.getContext('2d');
  let stars = [];
  const starCount = 150;
  let width, height;
  let mouseX = 0, mouseY = 0;

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    stars = [];
    for(let i=0; i<starCount; i++){
      stars.push({
        x: Math.random() * width,
        y: Math.random() * height,
        radius: Math.random() * 1.3 + 0.3
      });
    }
  }

  window.addEventListener('resize', resize);
  window.addEventListener('mousemove', e => {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  function drawStars() {
    ctx.clearRect(0, 0, width, height);
    ctx.fillStyle = 'white';
    stars.forEach(star => {
      let parallaxX = star.x + (mouseX - width/2) * 0.02 * star.radius;
      let parallaxY = star.y + (mouseY - height/2) * 0.02 * star.radius;
      ctx.beginPath();
      ctx.arc(parallaxX, parallaxY, star.radius, 0, Math.PI*2);
      ctx.fill();
    });
  }

  function animateStarfield() {
    drawStars();
    requestAnimationFrame(animateStarfield);
  }

  resize();
  animateStarfield();

  // Rocket SVGs (same as before)
  const rocketSVGs = [
    `<svg width="30" height="40" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg" >
      <path fill="#66fcf1" d="M12 0L14 5L12 9L10 5L12 0Z"/>
      <path fill="#45a29e" d="M10 5L12 9L8 12L6 10L10 5Z"/>
      <path fill="#1f2833" d="M12 9L14 5L20 18L12 32L4 18L10 5L12 9Z"/>
      <path fill="#0a141b" d="M12 32L20 18L18 16L12 25L6 16L4 18L12 32Z"/>
    </svg>`,
    `<svg width="30" height="40" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg" >
      <path fill="#ff6f61" d="M12 0L14 5L12 9L10 5L12 0Z"/>
      <path fill="#e6453a" d="M10 5L12 9L8 12L6 10L10 5Z"/>
      <path fill="#991f17" d="M12 9L14 5L20 18L12 32L4 18L10 5L12 9Z"/>
      <path fill="#6e0d0a" d="M12 32L20 18L18 16L12 25L6 16L4 18L12 32Z"/>
    </svg>`
  ];

  function createRocketElement(svgString) {
    const div = document.createElement('div');
    div.classList.add('space-object', 'rocket');
    div.style.backgroundImage = `url('data:image/svg+xml;utf8,${encodeURIComponent(svgString)}')`;
    div.style.width = '30px';
    div.style.height = '40px';
    div.style.position = 'fixed';
    div.style.pointerEvents = 'none';
    div.style.willChange = 'transform';

    // Flame behind rocket
    const flame = document.createElement('div');
    flame.classList.add('rocket-flame');
    div.appendChild(flame);

    return div;
  }

  function randomRange(min, max) {
    return Math.random() * (max - min) + min;
  }

  // SpaceObject class with smoke trail array attached
  class SpaceObject {
    constructor(type, size, speedX, speedY, rotationSpeed) {
      this.type = type;
      this.size = size;
      this.speedX = speedX;
      this.speedY = speedY;
      this.rotationSpeed = rotationSpeed || 0;
      this.x = Math.random() * window.innerWidth;
      this.y = Math.random() * window.innerHeight;
      this.rotation = 0;
      this.el = null;

      // For rockets: keep a fixed-length array of past positions for smoke trail
      if(this.type === 'rocket') {
        this.smokeTrail = [];
        this.maxTrailLength = 15; // number of smoke puffs
        this.smokeElements = [];
      }

      this.createElement();
    }

    createElement() {
      const container = document.getElementById('spaceObjectsContainer');
      if(this.type === 'rocket') {
        const svg = rocketSVGs[Math.floor(Math.random() * rocketSVGs.length)];
        this.el = createRocketElement(svg);
      } else {
        this.el = document.createElement('div');
        this.el.classList.add('space-object');
        this.el.style.width = this.size + 'px';
        this.el.style.height = this.size + 'px';
        switch(this.type) {
          case 'planet':
            this.el.classList.add('planet');
            const colors = ['red','blue','green','orange','purple'];
            this.el.classList.add(colors[Math.floor(Math.random()*colors.length)]);
            break;
          case 'comet':
            this.el.classList.add('comet');
            break;
          case 'asteroid':
            this.el.classList.add('asteroid');
            break;
        }
      }
      container.appendChild(this.el);

      // For rockets create smoke puff divs in smokeTrailContainer up front
      if(this.type === 'rocket') {
        const smokeContainer = document.getElementById('smokeTrailContainer');
        for(let i=0; i<this.maxTrailLength; i++) {
          const puff = document.createElement('div');
          puff.classList.add('smoke-puff');
          // random size for variety
          const size = randomRange(6, 14);
          puff.style.width = size + 'px';
          puff.style.height = size + 'px';
          puff.style.opacity = 0;
          smokeContainer.appendChild(puff);
          this.smokeElements.push(puff);
        }
      }
    }

    update() {
      this.x += this.speedX;
      this.y += this.speedY;

      // Wrap around edges
      if(this.x < -this.size) this.x = window.innerWidth + this.size;
      else if(this.x > window.innerWidth + this.size) this.x = -this.size;
      if(this.y < -this.size) this.y = window.innerHeight + this.size;
      else if(this.y > window.innerHeight + this.size) this.y = -this.size;

      if(this.type === 'rocket') {
        // Rotate rocket to face velocity vector
        let angleRad = Math.atan2(this.speedY, this.speedX);
        let angleDeg = angleRad * (180 / Math.PI) + 90; 
        this.rotation = angleDeg;
        this.el.style.transform = `translate(${this.x}px, ${this.y}px) rotate(${this.rotation}deg)`;

        // Update smoke trail positions:
        // Add current position behind rocket, offset by ~20px opposite direction of velocity
        const smokeX = this.x - Math.cos(angleRad)*20;
        const smokeY = this.y - Math.sin(angleRad)*20;

        // Push new position to smoke trail array
        this.smokeTrail.push({x: smokeX, y: smokeY, age: 0});
        if(this.smokeTrail.length > this.maxTrailLength) {
          this.smokeTrail.shift();
        }

        // Update smoke puff divs: position and opacity based on age
        for(let i=0; i<this.smokeTrail.length; i++) {
          const puff = this.smokeElements[i];
          const pos = this.smokeTrail[i];
          // Increase age by frame
          pos.age += 1;

          puff.style.left = pos.x + 'px';
          puff.style.top = pos.y + 'px';

          // Fade out older smoke: older = less opacity, bigger size
          let opacity = 0.5 * (1 - pos.age / this.maxTrailLength);
          puff.style.opacity = opacity < 0 ? 0 : opacity;

          // Increase puff size slightly over age
          let baseSize = parseFloat(puff.style.width);
          let size = baseSize + pos.age; // grows by 1px per frame
          puff.style.width = size + 'px';
          puff.style.height = size + 'px';
        }
      } else {
        // For others just rotate a bit
        this.rotation += this.rotationSpeed;
        this.el.style.transform = `translate(${this.x}px, ${this.y}px) rotate(${this.rotation}deg)`;
      }
    }
  }

  // Create objects
  const spaceObjects = [];
  function createSpaceObjects() {
    const container = document.getElementById('spaceObjectsContainer');
    container.innerHTML = '';
    document.getElementById('smokeTrailContainer').innerHTML = '';
    spaceObjects.length = 0;

    // Rockets
    for(let i=0; i<5; i++){
      spaceObjects.push(new SpaceObject('rocket', 30, randomRange(-1.5,1.5), randomRange(-1.2,1.2)));
    }
    // Planets
    for(let i=0; i<7; i++){
      spaceObjects.push(new SpaceObject('planet', randomRange(50,110), randomRange(-0.15,0.15), randomRange(-0.15,0.15), randomRange(-0.03,0.03)));
    }
    // Comets
    for(let i=0; i<4; i++){
      spaceObjects.push(new SpaceObject('comet', randomRange(35, 60), randomRange(-1,1), randomRange(-0.5,0.5), randomRange(-0.01,0.01)));
    }
    // Asteroids
    for(let i=0; i<4; i++){
      spaceObjects.push(new SpaceObject('asteroid', randomRange(25, 40), randomRange(-0.3,0.3), randomRange(-0.3,0.3), randomRange(-0.02,0.02)));
    }
  }

  function animate() {
    spaceObjects.forEach(obj => obj.update());
    requestAnimationFrame(animate);
  }

  createSpaceObjects();
  animate();

  // Facts data
  const spaceFacts = [
    "Space is completely silent because there's no atmosphere to carry sound.",
    "Venus spins backward compared to most planets, so the Sun rises in the west and sets in the east.",
    "A day on Venus is longer than its year â€” it takes 243 Earth days to rotate once.",
    "Neutron stars can spin 600 times per second and are incredibly dense.",
    "The footprints on the Moon will stay there for millions of years because there's no wind or water to erode them.",
    "Jupiter's Great Red Spot is a giant storm that's been raging for over 300 years.",
    "Saturn is the least dense planet; it could float in water if there was a big enough bathtub.",
    "A teaspoon of a neutron star would weigh about 6 billion tons on Earth.",
    "Mars has the largest volcano in the solar system, Olympus Mons, nearly three times the height of Mount Everest.",
    "Mercury has no atmosphere, so temperatures can swing from -173Â°C at night to 427Â°C during the day."
  ];

  const factDisplay = document.getElementById('factDisplay');
  const factButton = document.getElementById('factButton');
  const muteToggle = document.getElementById('muteToggle');

  // Sound setup
  const sound = new Audio('rocket-sound.mp3');
  sound.volume = 0.15;
  sound.loop = false;

  let soundEnabled = true;
  muteToggle.addEventListener('click', () => {
    soundEnabled = !soundEnabled;
    muteToggle.textContent = soundEnabled ? 'ðŸ”Š' : 'ðŸ”‡';
  });

  factButton.addEventListener('click', () => {
    factButton.disabled = true;
    let newFact;
    do {
      newFact = spaceFacts[Math.floor(Math.random() * spaceFacts.length)];
    } while(newFact === factDisplay.textContent);

    factDisplay.textContent = newFact;

    if(soundEnabled){
      sound.currentTime = 0;
      sound.play();
    }

    setTimeout(() => {
      factButton.disabled = false;
    }, 1500);
  });
</script>
</body>
</html>
