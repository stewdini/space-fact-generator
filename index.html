<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Random Space Fact Generator | Space Simplified</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #e0e0e0;
    background: #000010;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 1rem;
    position: relative;
  }

  canvas#starfield {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
  }

  /* Space objects base style */
  .space-object {
    position: fixed;
    pointer-events: none;
    z-index: 0;
    will-change: transform, left, top;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    /* IMPORTANT: remove transform transition (caused stutter/laggy feeling) */
    /* transition: transform 0.05s linear;  <-- removed */
    backface-visibility: hidden;
  }

  /* PLANETS */
  .planet {
    border-radius: 50%;
    box-shadow: 0 0 8px 1px rgba(100,150,255,0.3);
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
  }
  .planet.red {
    background-color: #b0413e;
    background-image:
      radial-gradient(circle at 30% 30%, #a03736 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #a83a3a 15%, transparent 18%),
      radial-gradient(circle at 55% 75%, #80312f 8%, transparent 10%);
    box-shadow: 0 0 6px 1px rgba(180, 65, 62, 0.35);
  }
  .planet.blue {
    background-color: #4b7dad;
    background-image:
      radial-gradient(circle at 25% 25%, #3d6890 8%, transparent 10%),
      radial-gradient(circle at 65% 60%, #366384 14%, transparent 17%),
      radial-gradient(circle at 50% 80%, #2b516f 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(75, 125, 173, 0.35);
  }
  .planet.green {
    background-color: #4ca36c;
    background-image:
      radial-gradient(circle at 30% 30%, #418b5a 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #3e7e52 14%, transparent 17%),
      radial-gradient(circle at 55% 75%, #2e5c3d 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(76, 163, 108, 0.35);
  }
  .planet.orange {
    background-color: #d17f3c;
    background-image:
      radial-gradient(circle at 30% 30%, #ab6831 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #9c5f2b 14%, transparent 17%),
      radial-gradient(circle at 55% 75%, #6d411d 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(209, 127, 60, 0.35);
  }
  .planet.purple {
    background-color: #7855b8;
    background-image:
      radial-gradient(circle at 30% 30%, #6646a1 10%, transparent 12%),
      radial-gradient(circle at 70% 60%, #5a3d8a 14%, transparent 17%),
      radial-gradient(circle at 55% 75%, #3d2b5f 7%, transparent 9%);
    box-shadow: 0 0 6px 1px rgba(120, 85, 184, 0.35);
  }

  h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    position: relative;
    z-index: 10;
    text-shadow: 0 0 8px #66fcf1;
  }

  .sparkle {
    display: inline-block;
    animation: sparkleAnim 2s linear infinite;
    font-size: 2.2rem;
    color: #66fcf1;
    margin-left: 0.3em;
    position: relative;
    top: 5px;
  }

  @keyframes sparkleAnim {
    0%, 100% { opacity: 1; transform: rotate(0deg) scale(1); }
    50% { opacity: 0.5; transform: rotate(20deg) scale(1.3); }
  }

  #factWrapper {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    max-width: 700px;
    z-index: 10;
  }

  #factDisplay {
    font-size: 1.4rem;
    margin: 2rem 0;
    line-height: 1.6;
    position: relative;
    opacity: 0;
    animation: fadeIn 1s forwards;
    text-shadow: 0 0 6px #45a29eaa;
    max-width: 600px;
    word-wrap: break-word;
  }

  #factDisplay.show {
    animation: fadeIn 1s forwards;
    opacity: 1;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  #copyButton {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    margin-left: 4px;
    display: none;
    color: #ccc;
    transition: color 0.2s ease, transform 0.2s ease;
    width: 24px;
    height: 24px;
    flex-shrink: 0;
  }

  #copyButton:hover {
    color: #fff;
    transform: scale(1.2);
  }

  #copyFeedback {
    font-size: 1.5rem;
    color: #66fcf1;
    margin-left: 8px;
    user-select: none;
    display: none;
    align-self: center;
  }

  .buttons-container {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin-top: 1rem;
    position: relative;
    z-index: 10;
  }

  #factButton {
    padding: 14px 35px;
    font-size: 1.3rem;
    border: none;
    border-radius: 10px;
    background-color: #1f2833;
    color: #66fcf1;
    cursor: pointer;
    transition: background-color 0.4s ease, box-shadow 0.4s ease, transform 0.2s ease;
    box-shadow: 0 0 12px #45a29e99;
    animation: pulseGlow 2.5s ease-in-out infinite;
  }

  #factButton:disabled {
    cursor: not-allowed;
    opacity: 0.5;
    animation: none;
    box-shadow: none;
    background-color: #0a141b;
    color: #444;
  }

  @keyframes pulseGlow {
    0%, 100% { box-shadow: 0 0 12px #45a29e99, 0 0 20px #66fcf1cc; }
    50% { box-shadow: 0 0 20px #45a29ecc, 0 0 30px #66fcf1ff; }
  }

  #factButton:hover:not(:disabled) {
    background-color: #45a29e;
    box-shadow: 0 0 30px #66fcf1ff;
    transform: scale(1.05);
    animation: none;
  }

  #factButton:active:not(:disabled) {
    transform: scale(0.95);
    box-shadow: 0 0 10px #45a29e99;
  }

  #muteToggle {
    background: none;
    border: none;
    font-size: 1.4rem;
    cursor: pointer;
    color: #66fcf1;
    padding: 0;
    margin: 0 0 0 12px;
    line-height: 1;
    user-select: none;
    transition: transform 0.2s ease;
  }

  #muteToggle:hover {
    transform: scale(1.2);
  }

  /* Smoke style */
  .smoke {
    position: fixed;
    width: 14px;
    height: 14px;
    background: rgba(180,180,180,0.3);
    border-radius: 50%;
    filter: blur(3px);
    pointer-events: none;
    z-index: 0;
    will-change: opacity, transform, left, top;
    transform-origin: center center;
  }
</style>
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png" />
<link rel="manifest" href="images/site.webmanifest" />
<link rel="mask-icon" href="images/safari-pinned-tab.svg" color="#5bbad5" />
<meta name="msapplication-TileColor" content="#2b5797" />
<meta name="theme-color" content="#000000" />
</head>
<body>
  <canvas id="starfield"></canvas>

  <div id="spaceObjectsContainer"></div>

  <h1>ðŸ”­ Random Space Fact Generator<span class="sparkle">âœ¨</span></h1>

  <div id="factWrapper" style="display:flex; align-items:center; justify-content:center; gap: 6px; flex-wrap:wrap; max-width:700px;">
    <p id="factDisplay">Click the button below to learn a cool space fact!</p>

    <button id="copyButton" title="Copy to clipboard" aria-label="Copy fact" aria-live="polite" aria-atomic="true" role="button">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        viewBox="0 0 24 24"
        width="24"
        height="24"
        aria-hidden="true"
      >
        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
      </svg>
    </button>

    <span id="copyFeedback" aria-hidden="true" role="alert">âœ…</span>
  </div>

  <div class="buttons-container">
    <button id="factButton">Show Me a Random Fact</button>
    <button id="muteToggle" title="Toggle sound">ðŸ”Š</button>
  </div>

<script>
  // ---------------------------
  // Starfield setup
  // ---------------------------
  const canvas = document.getElementById('starfield');
  const ctx = canvas.getContext('2d');
  let stars = [];
  const starCount = 150;
  let width, height;
  let mouseX = 0;
  let mouseY = 0;

  function initStars() {
    stars = [];
    for(let i=0; i<starCount; i++) {
      stars.push({
        x: Math.random() * width,
        y: Math.random() * height,
        radius: Math.random() * 1.3 + 0.3,
      });
    }
  }

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    initStars();
  }

  function drawStars() {
    ctx.clearRect(0, 0, width, height);
    ctx.fillStyle = 'white';
    stars.forEach(star => {
      let parallaxX = star.x + (mouseX - width/2) * 0.02 * star.radius;
      let parallaxY = star.y + (mouseY - height/2) * 0.02 * star.radius;

      ctx.beginPath();
      ctx.arc(parallaxX, parallaxY, star.radius, 0, 2 * Math.PI);
      ctx.fill();
    });
  }

  window.addEventListener('resize', resize);
  window.addEventListener('mousemove', e => {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  function animateStarfield() {
    drawStars();
    requestAnimationFrame(animateStarfield);
  }

  resize();
  animateStarfield();

  // ---------------------------
  // Asset URLs
  // ---------------------------
  const rocketImages = [
    'https://stewdini.github.io/space-fact-generator/images/rocket1.png',
    'https://stewdini.github.io/space-fact-generator/images/rocket2.png',
  ];

  const asteroidImages = [
    'https://stewdini.github.io/space-fact-generator/images/asteroid1.png',
    'https://stewdini.github.io/space-fact-generator/images/asteroid2.png',
    'https://stewdini.github.io/space-fact-generator/images/asteroid3.png',
  ];

  const spaceObjectsContainer = document.getElementById('spaceObjectsContainer');

  // Tweak if your rockets look 90Â° off. Try 0, 90, -90, or 180.
  const ROCKET_HEADING_OFFSET_DEG = 0;

  class SpaceObject {
    constructor(type) {
      this.type = type;
      this.el = document.createElement('div');
      this.el.classList.add('space-object');

      if (type === 'planet') {
        this.size = 40 + Math.random() * 35;
        this.el.classList.add('planet');
        const planetColors = ['red', 'blue', 'green', 'orange', 'purple'];
        const color = planetColors[Math.floor(Math.random() * planetColors.length)];
        this.el.classList.add(color);

        // Position randomly but not in center 300x300 area (avoid text)
        do {
          this.x = Math.random() * window.innerWidth;
          this.y = Math.random() * window.innerHeight;
        } while(
          this.x > window.innerWidth/2 - 150 && this.x < window.innerWidth/2 + 150 &&
          this.y > window.innerHeight/2 - 150 && this.y < window.innerHeight/2 + 150
        );

        this.speedX = 0;
        this.speedY = 0;
        this.rotation = 0;

        this.el.style.width = this.size + 'px';
        this.el.style.height = this.size + 'px';
        this.el.style.transformOrigin = '50% 50%';
        this.updatePosition(true); // set initial
      }
      else if (type === 'asteroid') {
        this.size = 30 + Math.random() * 20;
        this.el.style.backgroundImage = `url(${asteroidImages[Math.floor(Math.random() * asteroidImages.length)]})`;
        this.el.style.width = this.size + 'px';
        this.el.style.height = this.size + 'px';

        this.x = Math.random() * window.innerWidth;
        this.y = Math.random() * window.innerHeight;
        this.speedX = (Math.random() - 0.5) * 0.35; // a bit quicker for smoothness
        this.speedY = (Math.random() - 0.5) * 0.35;

        this.rotation = Math.random() * 360;
        this.rotationSpeed = (Math.random() - 0.5) * 0.4;

        this.el.style.transformOrigin = '50% 50%';
        this.updatePosition(true);
      }
      else if (type === 'rocket') {
        // Visible rocket size (tweak to your images)
        this.w = 30;
        this.h = 40;

        // Use rocket1/rocket2 (PNG with flame baked in)
        this.el.style.backgroundImage = `url(${rocketImages[Math.floor(Math.random() * rocketImages.length)]})`;
        this.el.style.width = this.w + 'px';
        this.el.style.height = this.h + 'px';

        // Spawn from screen edges with a slightly higher base speed
        const edge = Math.floor(Math.random() * 4);
        const base = 0.9, extra = 0.5; // increase speed a touch
        switch(edge) {
          case 0: // top -> going down
            this.x = Math.random() * window.innerWidth;
            this.y = -60;
            this.speedX = (Math.random() - 0.5) * (base + extra * 0.5);
            this.speedY = base + Math.random() * extra;
            break;
          case 1: // right -> going left
            this.x = window.innerWidth + 60;
            this.y = Math.random() * window.innerHeight;
            this.speedX = -(base + Math.random() * extra);
            this.speedY = (Math.random() - 0.5) * (base + extra * 0.5);
            break;
          case 2: // bottom -> going up
            this.x = Math.random() * window.innerWidth;
            this.y = window.innerHeight + 60;
            this.speedX = (Math.random() - 0.5) * (base + extra * 0.5);
            this.speedY = -(base + Math.random() * extra);
            break;
          case 3: // left -> going right
            this.x = -60;
            this.y = Math.random() * window.innerHeight;
            this.speedX = base + Math.random() * extra;
            this.speedY = (Math.random() - 0.5) * (base + extra * 0.5);
            break;
        }

        this.rotation = 0;
        this.smokeTrail = [];
        this.el.style.transformOrigin = '50% 50%'; // rotate around center
        this.updatePosition(true);
      }

      spaceObjectsContainer.appendChild(this.el);
    }

    updatePosition(initial=false) {
      // left/top for layout, rotate via transform (fast + accurate)
      this.el.style.left = this.x + 'px';
      this.el.style.top = this.y + 'px';
      if (this.type === 'planet') {
        if (initial) this.el.style.transform = 'rotate(0deg)';
      } else if (this.type === 'asteroid') {
        this.el.style.transform = `rotate(${this.rotation}deg)`;
      } else if (this.type === 'rocket') {
        // angle from velocity
        const angleRad = Math.atan2(this.speedY, this.speedX);
        const angleDeg = angleRad * 180 / Math.PI + ROCKET_HEADING_OFFSET_DEG;
        this.rotation = angleDeg;
        this.el.style.transform = `rotate(${this.rotation}deg)`;
      }
    }

    update() {
      this.x += this.speedX;
      this.y += this.speedY;

      // Wrap around edges with buffer for asteroids; rockets will respawn instead
      if (this.type === 'asteroid') {
        if (this.x < -120) this.x = window.innerWidth + 120;
        else if (this.x > window.innerWidth + 120) this.x = -120;
        if (this.y < -120) this.y = window.innerHeight + 120;
        else if (this.y > window.innerHeight + 120) this.y = -120;

        this.rotation += this.rotationSpeed;
        this.updatePosition();
        return true;
      }

      if (this.type === 'planet') {
        // planets stay still (by request)
        return true;
      }

      if (this.type === 'rocket') {
        // If rocket left the stage, remove and signal replacement
        if (
          this.x < -150 || this.x > window.innerWidth + 150 ||
          this.y < -150 || this.y > window.innerHeight + 150
        ) {
          this.el.remove();
          // cleanup smoke nodes left alive
          this.smokeTrail.forEach(s => s.el.remove());
          this.smokeTrail.length = 0;
          return false;
        }

        // Update rotation straight from velocity
        const angleRad = Math.atan2(this.speedY, this.speedX);
        const angleDeg = angleRad * 180 / Math.PI + ROCKET_HEADING_OFFSET_DEG;
        this.rotation = angleDeg;

        // Update element transform + pos
        this.updatePosition();

        // Spawn smoke at bottom-middle of the rocket PNG, respecting rotation
        if (Math.random() < 0.45) { // emission rate
          this.spawnSmokeAtNozzle(angleRad);
        }

        // Update existing smoke particles
        for (let i = this.smokeTrail.length - 1; i >= 0; i--) {
          const s = this.smokeTrail[i];
          s.life -= 1;
          s.x += s.vx;
          s.y += s.vy;
          s.scale += 0.004;
          s.opacity -= 0.015;
          if (s.opacity < 0) s.opacity = 0;

          s.el.style.left = s.x + 'px';
          s.el.style.top = s.y + 'px';
          s.el.style.opacity = s.opacity;
          s.el.style.transform = `scale(${s.scale})`;

          if (s.life <= 0 || s.opacity <= 0) {
            s.el.remove();
            this.smokeTrail.splice(i, 1);
          }
        }

        return true;
      }

      return true;
    }

    spawnSmokeAtNozzle(angleRad) {
      // Compute the rocket center
      const cx = this.x + (this.w || this.size || 30) / 2;
      const cy = this.y + (this.h || this.size || 40) / 2;

      // Distance from center to bottom-middle (nozzle) in the rocket's local coords
      const halfH = (this.h || 40) / 2;
      const nozzleOffset = halfH - 2; // tiny inset so it doesn't clip

      // Include the same heading offset the image uses
      const theta = angleRad + (ROCKET_HEADING_OFFSET_DEG * Math.PI / 180);

      // Rotate local (0, +nozzleOffset) by theta
      const dx = -nozzleOffset * Math.sin(theta);
      const dy =  nozzleOffset * Math.cos(theta);

      const smokeX = cx + dx;
      const smokeY = cy + dy;

      // Velocity opposite rocket direction + slight randomness
      const mag = Math.hypot(this.speedX, this.speedY) || 1;
      const ux = this.speedX / mag;
      const uy = this.speedY / mag;

      const vx = -ux * 0.25 + (Math.random() - 0.5) * 0.15;
      const vy = -uy * 0.25 + (Math.random() - 0.5) * 0.15;

      const smoke = document.createElement('div');
      smoke.classList.add('smoke');
      smoke.style.left = smokeX + 'px';
      smoke.style.top = smokeY + 'px';

      spaceObjectsContainer.appendChild(smoke);

      this.smokeTrail.push({
        el: smoke,
        x: smokeX,
        y: smokeY,
        vx, vy,
        life: 45 + Math.floor(Math.random() * 15),
        opacity: 0.45 + Math.random() * 0.25,
        scale: 0.8 + Math.random() * 0.3
      });

      // Cap total smoke nodes per rocket to avoid DOM bloat
      if (this.smokeTrail.length > 80) {
        const old = this.smokeTrail.shift();
        old.el.remove();
      }
    }
  }

  // ---------------------------
  // Create space objects
  // ---------------------------
  const spaceObjects = [];

  // Planets (still)
  for (let i = 0; i < 6; i++) {
    spaceObjects.push(new SpaceObject('planet'));
  }
  // Asteroids (moving + rotating)
  for (let i = 0; i < 7; i++) {
    spaceObjects.push(new SpaceObject('asteroid'));
  }
  // Rockets (moving + smoke)
  for (let i = 0; i < 4; i++) {
    spaceObjects.push(new SpaceObject('rocket'));
  }

  // ---------------------------
  // Animation loop for objects
  // ---------------------------
  function animateSpaceObjects() {
    for (let i = spaceObjects.length - 1; i >= 0; i--) {
      const obj = spaceObjects[i];
      const alive = obj.update();
      if (alive === false) {
        const deadType = obj.type; // capture before splice
        spaceObjects.splice(i, 1);
        spaceObjects.push(new SpaceObject(deadType));
      }
    }
    requestAnimationFrame(animateSpaceObjects);
  }
  animateSpaceObjects();

  // ---------------------------
  // Space facts list & UI
  // ---------------------------
  const spaceFacts = [
    "A day on Venus is longer than a year on Venus.",
    "Neutron stars can spin 600 times per second.",
    "The footprints on the Moon will stay there for millions of years.",
    "Mars has the tallest volcano in the solar system.",
    "One million Earths could fit inside the Sun.",
    "There is a planet made of diamonds.",
    "The largest asteroid in the asteroid belt is called Ceres.",
    "Jupiterâ€™s Great Red Spot is a giant storm larger than Earth.",
    "Saturnâ€™s rings are made mostly of ice particles.",
    "The first woman in space was Valentina Tereshkova.",
    "Space smells like seared steak and hot metal.",
    "The Sun accounts for 99.86% of the Solar Systemâ€™s mass."
  ];

  const factButton = document.getElementById('factButton');
  const factDisplay = document.getElementById('factDisplay');
  const copyButton = document.getElementById('copyButton');
  const copyFeedback = document.getElementById('copyFeedback');
  const muteToggle = document.getElementById('muteToggle');

  let isMuted = false;

  // Sound effect for button
  const buttonSound = new Audio('https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg');
  buttonSound.volume = 0.25;

  muteToggle.addEventListener('click', () => {
    isMuted = !isMuted;
    muteToggle.textContent = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';
  });

  factButton.addEventListener('click', () => {
    if (!isMuted) {
      buttonSound.currentTime = 0;
      buttonSound.play();
    }
    const randomFact = spaceFacts[Math.floor(Math.random() * spaceFacts.length)];
    factDisplay.textContent = randomFact;
    factDisplay.classList.add('show');
    copyButton.style.display = 'inline-flex';
    copyFeedback.style.display = 'none';
  });

  copyButton.addEventListener('click', () => {
    navigator.clipboard.writeText(factDisplay.textContent).then(() => {
      copyFeedback.style.display = 'inline';
      setTimeout(() => {
        copyFeedback.style.display = 'none';
      }, 1500);
    });
  });
</script>
</body>
</html>
